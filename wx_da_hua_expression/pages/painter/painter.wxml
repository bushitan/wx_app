<image catchtap="navigateToSwitch" class="back__switch"  src="/images/left.png"></image>
<view class="page"  >
    <view class="title" >
        <view class="weui-flex">
            <view class="weui-flex__item"></view>
            <view  wx:if="{{joinStatus==1}}">主题：</view>
            <view wx:if="{{joinStatus==1}}">
                <input value="{{themeName}}" placeholder="请输入主题" bindinput="inputChange"/>
            </view>
            <view wx:else>
                <label>{{themeName}}</label>
            </view>
            <!--保存图片，进入下一轮分享-->
            <view wx:if="{{joinStatus==1 ||joinStatus==2 }}" class="weui-flex__item complete" catchtap="saveToShare" >
                完成
            </view>
            <view wx:else class="weui-flex__item share" catchtap="shareInfo">
                分享
            </view>
        </view>  
    </view>

    <!--<view class="root">-->
        <!--<view class="board">-->
        <!--2层画板-->
     <view wx:if="{{joinStatus==3?true:false}}">
        <image src="{{imgUpload}}" style="width:{{canvasWidth}}px;height:{{canvasHeight}}px;left:{{canvasLeft}}px;"  ></image>
    </view>
   
    <view class="canvas-index"  wx:else>
        <canvas class="paper paper-background" canvas-id="paper" style="width:{{canvasWidth}}px;height:{{canvasHeight}}px;left:{{canvasLeft}}px;"  >  
        </canvas>
       
        <canvas class="paper" canvas-id="paper-lancet"   style="width:{{canvasWidth}}px;height:{{canvasHeight}}px;left:{{canvasLeft}}px;" 
            bindtouchstart="onLancetStart"  
            bindtouchmove="onLancetMove"   
            bindtouchend="onLancetEnd">    
        </canvas>
    </view>

    <view class="snatch"  wx:if="{{ joinStatus == 3 }}" catchtap="snatch">
        画两笔      
    </view>
    
    <view hidden="true" class="paint-tool" >
        <view class="color-picker">
            <view
                wx:for-items="{{colors}}"
                wx:for-item="color"
                class="color-item {{paintColor == color ? 'selected' : ''}}"
                data-color="{{color}}"
                style="background-color: {{color}}"  
                bindtap="chooseColor">     <!--选择颜色 事件-->
            </view>
            
        </view>
        
        <view class="tool-picker" >
                <view class="tool-item selected" style="background-color: red"   >颜色</view>
            <view class="tool-item selected"  catchtap="eventBase"  data-action="modeChange"  data-mode="pecile">铅笔</view>
            <!--<view class="tool-item selected" catchtap="eventBase"  data-action="modeChange"  data-mode="lancet">柳叶刀</view>-->
            <view class="tool-item selected" catchtap="eventBase" data-action="modeChange"  data-mode="eraser">橡皮</view>
            <view class="tool-item selected" catchtap="saveToShare" style="background-color: #FF0000" >
                    help
            </view>
            <view class="tool-item selected" style="background-color: #FF0000" >
                <navigator url="../together/together" open-type="switchTab" hover-class="other-navigator-hover">
                    主页
                </navigator>
            </view>
            <view class="tool-item selected" catchtap="size" >大小</view>
            <view class="tool-item selected" catchtap="clear" >还原</view>
            
        </view>

    </view>
    <!--joinStatus遮罩层-->
    <!--<view class="btn-share" >
         <button catchtap="shareInfo" >分享</button>
    </view>-->
        <!--画布工具区域-->
    <!--<view class="color-picker">
        <scroll-view>
            <view
                wx:for-items="{{colors}}"
                wx:for-item="color"
                class="color-item {{paintColor == color ? 'selected' : ''}}"
                data-color="{{color}}"
                style="background-color: {{color}}"  
                bindtap="chooseColor">    
            </view>
        </scroll-view>
    </view>-->

    <!--颜色版-->
    <view class="color-select weui-flex" hidden="{{!colorShow}}"  >
        <view class="cancel" catchtap="switchColor"> x</view>
        <scroll-view  scroll-x="true" class="weui-flex__item">
            <block wx:for="{{colors}}"  wx:for-item="color">
                 <view
                    class="color-box {{paintColor == color ? 'selected' : ''}}"
                    data-color="{{color}}"
                    style="background-color: {{color}}"  
                    bindtap="chooseColor">  
                </view>
            </block>
        </scroll-view>
    </view>

    <!--画笔大小-->
    <view class="color-select weui-flex" hidden="{{!pencilShow}}"  >
        <view class="cancel" catchtap="switchPencil"> x</view>
        <scroll-view  scroll-x="true" class="weui-flex__item">
            <block wx:for="{{sizes}}"  wx:for-item="size">
                 <view class="size-box {{paintSize == size ? 'size-selected' : ''}}" catchtap="chooseSize" data-size="{{size}}">
                    <view class="size-mark" style="width:{{size}}px; height:{{size}}px;margin:{{(40 - size)/2}}px auto;"></view>
                </view>
            </block>
        </scroll-view>
    </view>

    <!--橡皮擦-->
    <view class="color-select weui-flex" hidden="{{!eraserShow}}"  >
        <view class="cancel" catchtap="switchEraser"> x</view>
        <scroll-view  scroll-x="true" class="weui-flex__item">
            <block wx:for="{{eraserSizes}}"  wx:for-item="esize">
                 <view class="eraer-box {{eraserSize == esize ? 'eraer-selected' : ''}}" catchtap="chooseEraer" data-size="{{esize}}">
                    <view class="eraer-mark" style="width:{{esize}}px; height:{{esize}}px;margin:{{(40 - esize)/2}}px auto;"></view>
                </view>
            </block>
        </scroll-view>
    </view>


    <!--绘画工具栏-->
    <view class="canvas_tools" wx:if="{{joinStatus != 3 }}">
        <!--<view class="box box1" bindtap="penSelect" data-param="5"></view>
        <view class="box box1" bindtap="penSelect" data-param="5"></view>-->
        <view class="box box-color " catchtap="switchColor"  style="background-color: {{ paintColor}}"  data-param="#cc0033"></view>
        <view class="box box-pencil {{mode==1? 'box-select':''}}" catchtap="switchPencil" data-param="15"></view>
        <view class="box box-earser {{mode==2? 'box-select':''}}" bindtap="switchEraser"></view>
        <!--<view class="box box-image" bindtap="colorSelect" data-param="#ff9900"></view>-->
        <view class="box box-reset" bindtap="resetCanvas" data-param="#ff9900"></view>
        <!--<view class="box-large box-complete" catchtap="saveToShare" data-param="#ff9900">完成</view>-->
    </view>

    
</view>


<!--<button catchtap="save">save</button>
    <button catchtap="reDraw">reDraw</button>-->